!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/build/",t(t.s="S4tn")}({DuR2:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},S4tn:function(e,t,n){n("SukN");var r=n("y0Nt");window.addEventListener("load",function(){var e={fields:{address:"edit-field-map-0-address"}},t=document.querySelector('[data-drupal-selector="'+e.fields.address+'"]');if(null!==t){var n=document.createElement("div");n.setAttribute("class","dawa-autocomplete-container"),t.parentNode.replaceChild(n,t),n.appendChild(t),r.dawaAutocomplete(t,{select:function(e){fetch(e.data.href).then(function(e){return e.json()}).then(function(e){try{e.adgangsadresse.adgangspunkt.koordinater}catch(e){}})}})}})},SukN:function(e,t){},y0Nt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(E===setTimeout)return setTimeout(e,0);if((E===r||!E)&&setTimeout)return E=setTimeout,setTimeout(e,0);try{return E(e,0)}catch(t){try{return E.call(null,e,0)}catch(t){return E.call(this,e,0)}}}function s(e){if(N===clearTimeout)return clearTimeout(e);if((N===o||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(e);try{return N(e)}catch(t){try{return N.call(null,e)}catch(t){return N.call(this,e)}}}function u(){_&&R&&(_=!1,R.length?x=R.concat(x):O=-1,x.length&&a())}function a(){if(!_){var e=i(u);_=!0;for(var t=x.length;t;){for(R=x,x=[];++O<t;)R&&R[O].run();O=-1,t=x.length}R=null,_=!1,s(e)}}function l(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];x.push(new c(e,t)),1!==x.length||_||i(a)}function c(e,t){this.fun=e,this.array=t}function d(){}function f(e){throw new Error("process.binding is not supported")}function p(){return"/"}function h(e){throw new Error("process.chdir is not supported")}function v(){return 0}function m(e){var t=.001*U.call(F),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}function g(){return(new Date-B)/1e3}function y(){}function w(e,t){this.attrs=Q(),this.attrsArr=[],this.newAttrs=Q(),this.staticsApplied=!1,this.key=t,this.keyMap=Q(),this.keyMapValid=!0,this.focused=!1,this.nodeName=e,this.text=null}function b(){this.created=re.nodesCreated&&[],this.deleted=re.nodesDeleted&&[]}function k(e,t){t=Object.assign({select:function(){return null}},t);var n=["baseUrl","minLength","params","fuzzy","stormodtagerpostnumre","supplerendebynavn"].reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});t.adgangsadresserOnly?n.type="adgangsadresse":n.type="adresse";var r=new at(n),o=ot(e,{onSelect:function(e){r.select(e)},onTextChange:function(e,t){r.update(e,t)},render:t.render,multiline:t.multiline||!1});return r.setRenderCallback(function(e){return o.setSuggestions(e)}),r.setSelectCallback(function(e){o.selectAndClose(e.tekst),t.select(e)}),r.setInitialRenderCallback(function(e){return o.selectAndClose(e)}),t.id&&r.selectInitial(t.id),{id:function(e){return r.selectInitial(e)},destroy:function(){return o.destroy()},selected:function(){return r.selected}}}n.d(t,"dawaAutocomplete",function(){return k});var C=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},E=r,N=o;"function"==typeof C.setTimeout&&(E=setTimeout),"function"==typeof C.clearTimeout&&(N=clearTimeout);var R,x=[],_=!1,O=-1;c.prototype.run=function(){this.fun.apply(null,this.array)};var D={},q=[],T={},A={},S={},j=d,L=d,I=d,M=d,V=d,z=d,P=d,F=C.performance||{},U=F.now||F.mozNow||F.msNow||F.oNow||F.webkitNow||function(){return(new Date).getTime()},B=new Date,W={nextTick:l,title:"browser",browser:!0,env:D,argv:q,version:"",versions:T,on:j,addListener:L,once:I,off:M,removeListener:V,removeAllListeners:z,emit:P,binding:f,cwd:p,chdir:h,umask:v,hrtime:m,platform:"browser",release:A,config:S,uptime:g},X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},H=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),J=Object.prototype.hasOwnProperty;y.prototype=Object.create(null);var K=function(e,t){return J.call(e,t)},Q=function(){return new y},Y=function(e,t,n){var r=new w(t,n);return e.__incrementalDOMData=r,r},Z=function(e){return $(e),e.__incrementalDOMData},$=function e(t){if(!t.__incrementalDOMData){var n=t instanceof Element,r=n?t.localName:t.nodeName,o=n?t.getAttribute("key"):null,i=Y(t,r,o);if(o&&(Z(t.parentNode).keyMap[o]=t),n)for(var s=t.attributes,u=i.attrs,a=i.newAttrs,l=i.attrsArr,c=0;c<s.length;c+=1){var d=s[c],f=d.name,p=d.value;u[f]=p,a[f]=void 0,l.push(f),l.push(p)}for(var h=t.firstChild;h;h=h.nextSibling)e(h)}},ee=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===Z(t).nodeName?null:t.namespaceURI},te=function(e,t,n,r){var o=ee(n,t),i=void 0;return i=o?e.createElementNS(o,n):e.createElement(n),Y(i,n,r),i},ne=function(e){var t=e.createTextNode("");return Y(t,"#text",null),t},re={nodesCreated:null,nodesDeleted:null};b.prototype.markCreated=function(e){this.created&&this.created.push(e)},b.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},b.prototype.notifyChanges=function(){this.created&&this.created.length>0&&re.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&re.nodesDeleted(this.deleted)};var oe=!1,ie=!1,se=function(e,t){if(e!==t){for(var n=e,r=[];n&&n!==t;)r.push(n.nodeName.toLowerCase()),n=n.parentNode;throw new Error("One or more tags were not closed:\n"+r.join("\n"))}},ue=function(e){if(oe)throw new Error(e+"() can not be called between elementOpenStart() and elementOpenEnd().")},ae=function(e){if(ie)throw new Error(e+"() may not be called inside an element that has called skip().")},le=function(){if(oe)throw new Error("elementOpenEnd() must be called after calling elementOpenStart().")},ce=function(e,t){if(e!==t)throw new Error('Received a call to close "'+t+'" but "'+e+'" was open.')},de=function(e){var t=oe;return oe=e,t},fe=function(e){var t=ie;return ie=e,t},pe=function(e){return e instanceof Document||e instanceof DocumentFragment},he=function(e,t){for(var n=[],r=e;r!==t;)n.push(r),r=r.parentNode;return n},ve=function(e){for(var t=e,n=t;t;)n=t,t=t.parentNode;return n},me=function(e){var t=ve(e);return pe(t)?t.activeElement:null},ge=function(e,t){var n=me(e);return n&&e.contains(n)?he(n,t):[]},ye=function(e,t,n){for(var r=t.nextSibling,o=n;o!==t;){var i=o.nextSibling;e.insertBefore(o,r),o=i}},we=null,be=null,ke=null,Ce=null,Ee=function(e,t){for(var n=0;n<e.length;n+=1)Z(e[n]).focused=t},Ne=function(e){return function(t,n,r){var o=we,i=Ce,s=be,u=ke,a=!1,l=!1;we=new b,Ce=t.ownerDocument,ke=t.parentNode,"production"!==W.env.NODE_ENV&&(a=de(!1),l=fe(!1));var c=ge(t,ke);Ee(c,!0);var d=e(t,n,r);return Ee(c,!1),"production"!==W.env.NODE_ENV&&(le(),de(a),fe(l)),we.notifyChanges(),we=o,Ce=i,be=s,ke=u,d}}(function(e,t,n){return be=e,De(),t(n),Ae(),"production"!==W.env.NODE_ENV&&se(be,e),e}),Re=function(e,t,n){var r=Z(e);return t===r.nodeName&&n==r.key},xe=function(e,t){if(!be||!Re(be,e,t)){var n=Z(ke),r=be&&Z(be),o=n.keyMap,i=void 0;if(t){var s=o[t];s&&(Re(s,e,t)?i=s:s===be?we.markDeleted(s):_e(ke,s,o))}i||(i="#text"===e?ne(Ce):te(Ce,ke,e,t),t&&(o[t]=i),we.markCreated(i)),Z(i).focused?ye(ke,i,be):r&&r.key&&!r.focused?(ke.replaceChild(i,be),n.keyMapValid=!1):ke.insertBefore(i,be),be=i}},_e=function(e,t,n){e.removeChild(t),we.markDeleted(t);var r=Z(t).key;r&&delete n[r]},Oe=function(){var e=ke,t=Z(e),n=t.keyMap,r=t.keyMapValid,o=e.lastChild,i=void 0;if(o!==be||!r){for(;o!==be;)_e(e,o,n),o=e.lastChild;if(!r){for(i in n)o=n[i],o.parentNode!==e&&(we.markDeleted(o),delete n[i]);t.keyMapValid=!0}}},De=function(){ke=be,be=null},qe=function(){return be?be.nextSibling:ke.firstChild},Te=function(){be=qe()},Ae=function(){Oe(),be=ke,ke=ke.parentNode},Se=function(e,t){return Te(),xe(e,t),De(),ke},je=function(){return"production"!==W.env.NODE_ENV&&fe(!1),Ae(),be},Le=function(){return Te(),xe("#text",null),be},Ie={default:"__default"},Me=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},Ve=function(e,t,n){if(null==n)e.removeAttribute(t);else{var r=Me(t);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}},ze=function(e,t,n){e[t]=n},Pe=function(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n},Fe=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style,o=n;for(var i in o)K(o,i)&&Pe(r,i,o[i])}},Ue=function(e,t,n){var r=void 0===n?"undefined":X(n);"object"===r||"function"===r?ze(e,t,n):Ve(e,t,n)},Be=function(e,t,n){var r=Z(e),o=r.attrs;if(o[t]!==n){(We[t]||We[Ie.default])(e,t,n),o[t]=n}},We=Q();We[Ie.default]=Ue,We.style=Fe;var Xe=function(e,t,n,r){"production"!==W.env.NODE_ENV&&(ue("elementOpen"),ae("elementOpen"));var o=Se(e,t),i=Z(o);if(!i.staticsApplied){if(n)for(var s=0;s<n.length;s+=2){var u=n[s],a=n[s+1];Be(o,u,a)}i.staticsApplied=!0}for(var l=i.attrsArr,c=i.newAttrs,d=!l.length,f=3,p=0;f<arguments.length;f+=2,p+=2){var h=arguments[f];if(d)l[p]=h,c[h]=void 0;else if(l[p]!==h)break;var a=arguments[f+1];(d||l[p+1]!==a)&&(l[p+1]=a,Be(o,h,a))}if(f<arguments.length||p<l.length){for(;f<arguments.length;f+=1,p+=1)l[p]=arguments[f];for(p<l.length&&(l.length=p),f=0;f<l.length;f+=2){var u=l[f],a=l[f+1];c[u]=a}for(var v in c)Be(o,v,c[v]),c[v]=void 0}return o},Ge=function(e){"production"!==W.env.NODE_ENV&&ue("elementClose");var t=je();return"production"!==W.env.NODE_ENV&&ce(Z(t).nodeName,e),t},He=function(e,t,n,r){return Xe.apply(null,arguments),Ge(e)},Je=function(e,t){"production"!==W.env.NODE_ENV&&(ue("text"),ae("text"));var n=Le(),r=Z(n);if(r.text!==e){r.text=e;for(var o=e,i=1;i<arguments.length;i+=1){o=(0,arguments[i])(o)}n.data=o}return n},Ke=Ne,Qe=He,Ye=Xe,Ze=Ge,$e=Je,et=We,tt=ze;et.caretpos=function(e,t,n){e.setSelectionRange(n,n)},et.value=tt;var nt=function(e,t,n){if(e.suggestions.length>0&&e.focused){Ye("ul","",["class","dawa-autocomplete-suggestions","role","listbox"]);for(var r=0;r<e.suggestions.length;++r)!function(r){var o=e.suggestions[r],i="dawa-autocomplete-suggestion";e.selected===r&&(i+=" dawa-selected"),Ye("li","",["role","option"],"class",i,"onmousedown",function(e){t(r),e.preventDefault()});var s=o.forslagstekst.split("\n");if(s=s.map(function(e){return e.replace(/ /g,"Â ")}),n){$e(s[0]);for(var u=1;u<s.length;++u)Qe("br"),$e(s[u])}else $e(s.join(", "));Ze("li")}(r);Ze("ul")}},rt=function(e,t,n,r){Ke(e,function(){nt(t,n,r)})},ot=function(e,t){var n=t.onSelect,r=t.onTextChange,o=t.render||rt,i=!1,s="",u=0,a=document.createElement("div");e.parentNode.insertBefore(a,e.nextSibling);var l=function(e,t){s===e&&u===t||(r(e,t),s=e,u=t)},c={caretpos:2,inputText:"",selected:0,focused:document.activeElement===e,suggestions:[]},d=function(e){var t=e.value,n=e.selectionStart;c.caretpos=n,c.inputText=t,l(t,n)},f=void 0,p=function(e){var t=c.suggestions[e];c.inputText=t.tekst,c.caretpos=t.caretpos,c.suggestions=[],n(t),f(!0)},h=function(e){var t=window.event?e.keyCode:e.which;if(c.suggestions.length>0&&c.focused){if(40===t)c.selected=(c.selected+1)%c.suggestions.length,f();else if(38===t)c.selected=(c.selected-1+c.suggestions.length)%c.suggestions.length,f();else{if(13!==t&&9!==t)return!0;p(c.selected)}return e.preventDefault(),!1}},v=function(){c.focused=!0,f()},m=function(){return c.focused=!1,f(),!1},g=function(e){d(e.target)},y=function(e){return d(e.target)},w=!1,b=!1;(f=function(n){n&&(b=!0),w||(w=!0,requestAnimationFrame(function(){i||(w=!1,b&&(e.value=c.inputText,e.setSelectionRange(c.caretpos,c.caretpos)),b=!1,o(a,c,function(e){return p(e)},t.multiline))}))})();var k=function(){i=!0,e.removeEventListener("keydown",h),e.removeEventListener("blur",m),e.removeEventListener("focus",v),e.removeEventListener("input",g),e.removeEventListener("mouseup",y),Ke(a,function(){}),a.remove()},C=function(e){c.suggestions=e,c.selected=0,f()},E=function(e){c.inputText=e,c.caretpos=e.length,c.suggestions=[],c.selected=0,f(!0)};return e.addEventListener("keydown",h),e.addEventListener("blur",m),e.addEventListener("focus",v),e.addEventListener("input",g),e.addEventListener("mouseup",y),e.setAttribute("aria-autocomplete","list"),e.setAttribute("autocomplete","off"),{destroy:k,setSuggestions:C,selectAndClose:E}},it=function(e){return Object.keys(e).map(function(t){var n=e[t];return t+"="+encodeURIComponent(n)}).join("&")},st=function(e){return new Promise(function(t){return setTimeout(t,e)})},ut={params:{},minLength:2,retryDelay:500,renderCallback:function(){console.error("No renderCallback supplied")},initialRenderCallback:function(){console.error("No initialRenderCallback supplied")},type:"adresse",baseUrl:"https://dawa.aws.dk",adgangsadresserOnly:!1,stormodtagerpostnumre:!0,supplerendebynavn:!0,fuzzy:!0,fetchImpl:function(e,t){return fetch(e+"?"+it(t),{mode:"cors"}).then(function(e){return e.json()})}},at=function(){function e(t){G(this,e),t=Object.assign({},ut,t||{}),this.options=t,this.state={currentRequest:null,pendingRequest:null},this.selected=null}return H(e,[{key:"_getAutocompleteResponse",value:function(e,t,n,r,o,i){var s=Object.assign({},this.options.params,{q:e,type:this.options.type,caretpos:t,supplerendebynavn:o,stormodtagerpostnumre:i,multilinje:!0});return this.options.fuzzy&&(s.fuzzy=""),r&&(s.adgangsadresseid=r),n&&(s.startfra="adgangsadresse"),this.options.fetchImpl(this.options.baseUrl+"/autocomplete",s)}},{key:"_scheduleRequest",value:function(e){null!==this.state.currentRequest?this.state.pendingRequest=e:(this.state.currentRequest=e,this._executeRequest())}},{key:"_executeRequest",value:function(){var e=this,t=this.state.currentRequest,n=null,r=!1,o=void 0,i=void 0;if(t.selected){var s=t.selected;if(s.type===this.options.type)return this.options.selectCallback(s),this.selected=s,void this._requestCompleted();n="adgangsadresse"===s.type?s.data.id:null,r="vejnavn"===s.type,o=s.tekst,i=s.caretpos}else o=t.text,i=t.caretpos;if(t.selectedId){var u={id:t.selectedId,type:this.options.type};return this.options.fetchImpl(this.options.baseUrl+"/autocomplete",u).then(function(n){return e._handleResponse(t,n)},function(n){return e._handleFailedRequest(t,n)})}t.selected||t.text.length>=this.options.minLength?this._getAutocompleteResponse(o,i,r,n,this.options.supplerendebynavn,this.options.stormodtagerpostnumre).then(function(n){return e._handleResponse(t,n)},function(n){return e._handleFailedRequest(t,n)}):this._handleResponse(t,[])}},{key:"_handleFailedRequest",value:function(e,t){var n=this;return console.error("DAWA request failed",t),st(this.options.retryDelay).then(function(){n.state.pendingRequest||n._scheduleRequest(e),n._requestCompleted()})}},{key:"_handleResponse",value:function(e,t){if(e.selected)if(1===t.length){var n=t[0];n.type===this.options.type?this.options.selectCallback(n):this.state.pendingRequest||(this.state.pendingRequest={selected:n})}else this.options.renderCallback&&this.options.renderCallback(t);else e.selectedId?1===t.length&&(this.selected=t[0],this.options.initialRenderCallback(t[0].tekst)):this.options.renderCallback&&this.options.renderCallback(t);this._requestCompleted()}},{key:"_requestCompleted",value:function(){this.state.currentRequest=this.state.pendingRequest,this.state.pendingRequest=null,this.state.currentRequest&&this._executeRequest()}},{key:"setRenderCallback",value:function(e){this.options.renderCallback=e}},{key:"setInitialRenderCallback",value:function(e){this.options.initialRenderCallback=e}},{key:"setSelectCallback",value:function(e){this.options.selectCallback=e}},{key:"update",value:function(e,t){var n={text:e,caretpos:t};this._scheduleRequest(n)}},{key:"select",value:function(e){var t={selected:e};this._scheduleRequest(t)}},{key:"selectInitial",value:function(e){var t={selectedId:e};this._scheduleRequest(t)}},{key:"destroy",value:function(){}}]),e}()}.call(t,n("DuR2"))}});